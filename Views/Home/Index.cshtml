@model NhomProject.Models.HomeViewModel
@{
    ViewData["Title"] = "Home Page";
    var vnFormat = new System.Globalization.CultureInfo("vi-VN");
    vnFormat.NumberFormat.NumberDecimalDigits = 0;
    vnFormat.NumberFormat.NumberGroupSeparator = ".";
}

<div class="container">
    <div class="swiper promo-carousel">
        <div class="swiper-wrapper">
            <div class="swiper-slide" style="background-image: url('/images/1.png'); background-size: cover; background-position: center; ">
                <a href="#" class="carousel-link"></a>
            </div>
            <div class="swiper-slide" style="background-image: url('/images/2.png'); background-size: cover; background-position: center; ">
                <a href="#" class="carousel-link"></a>
            </div>
            <div class="swiper-slide" style="background-image: url('/Images/3.png'); background-size: cover; background-position: center; ">
                <a href="#" class="carousel-link"></a>
            </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>

    @* --- SECTION 1: ĐIỆN THOẠI --- *@
    <h2 class="section-title">Điện Thoại Nổi Bật</h2>
    <div class="product-grid">
        @foreach (var product in Model.PhoneProducts)
        {
            <a href="@Url.Action("Details", "Home", new { id = product.ProductId })" class="product-card">
                <div class="product-card-image">
                    <img src="@(string.IsNullOrEmpty(product.ThumbnailUrl) ? "https://placehold.co/200x180/f0f0f0/999?text=No+Image" : Url.Content(product.ThumbnailUrl))" alt="@product.Name" style="width: 100%; height: 100%; object-fit: cover;" />
                </div>
                <div class="product-card-body">
                    <h3 class="product-card-title">@product.Name</h3>
                    <div class="product-card-price">

                        @* FIX 1: CHANGE THIS LINE *@
                        @product.Price.ToString("N0", vnFormat)Đ
                        @if (product.OldPrice.HasValue && product.OldPrice.Value > product.Price)
                        {
                            <span class="product-card-price-old">
                                @* FIX 2: CHANGE THIS LINE *@
                                @product.OldPrice.Value.ToString("N0", vnFormat)Đ
                            </span>
                        }
                    </div>
                    <div class="product-card-rating">
                        @product.Rating Stars (@product.ReviewCount)
                    </div>
                </div>
            </a>
        }
    </div>

    @* --- SECTION 2: LAPTOPS --- *@
    <h2 class="section-title">Laptops Bán Chạy</h2>
    <div class="product-grid">
        @foreach (var product in Model.LaptopProducts)
        {
            <a href="@Url.Action("Details", "Home", new { id = product.ProductId })" class="product-card">
                <div class="product-card-image">

                    <img src="@(string.IsNullOrEmpty(product.ThumbnailUrl) ? "https://placehold.co/200x180/f0f0f0/999?text=No+Image" : Url.Content(product.ThumbnailUrl))" alt="@product.Name" style="width: 100%; height: 100%; object-fit: cover;" />
                </div>
                <div class="product-card-body">
                    <h3 class="product-card-title">@product.Name</h3>
                    <div class="product-card-price">

                        @* FIX 3: CHANGE THIS LINE *@
                        @product.Price.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))Đ

                        @if (product.OldPrice.HasValue && product.OldPrice.Value > product.Price)
                        {
                            <span class="product-card-price-old">
                                @* FIX 4: CHANGE THIS LINE *@
                                @product.OldPrice.Value.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))Đ
                            </span>
                        }
                    </div>
                    <div class="product-card-rating">
                        @product.Rating Stars (@product.ReviewCount)
                    </div>
                </div>
            </a>
        }
    </div>

</div>