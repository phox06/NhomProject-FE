@model PagedList.IPagedList<NhomProject.Models.Order>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Danh sách đơn hàng";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    var vnFormat = new System.Globalization.CultureInfo("vi-VN");
    vnFormat.NumberFormat.NumberDecimalDigits = 0;
    vnFormat.NumberFormat.NumberGroupSeparator = ".";
}

<h2 class="bg-light text-dark p-3 border-bottom">DANH SÁCH ĐƠN HÀNG</h2>

<div class="card mb-4 border-0">
    <div class="card-body">
        @using (Html.BeginForm("Index", "Orders", FormMethod.Get))
        {
            <div class="row">
                <div class="col-md-3">
                    <label>Tên khách hàng</label>
                    @Html.TextBox("searchName", ViewBag.SearchName as string, new { @class = "form-control" })
                </div>
                <div class="col-md-3">
                    <label>Trạng thái thanh toán</label>
                    @Html.DropDownList("searchStatus", new SelectList(new[] { "Pending", "Paid", "Processing", "Shipped", "Cancelled" }), "Tất cả", new { @class = "form-control" })
                </div>
                <div class="col-md-3">
                    <label>Ngày đặt hàng</label>
                    <input type="date" name="searchDate" value="@ViewBag.SearchDate" class="form-control" />
                </div>
                <div class="col-md-3 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">Tìm kiếm</button>
                </div>
            </div>
        }
    </div>
</div>

@if (Model.Any())
{
    <table class="table table-striped table-hover">
        <thead class="bg-info text-white">
            <tr>
                <th>Ngày đặt hàng</th>
                <th>Tên khách hàng</th>
                <th>Tổng giá trị</th>
                <th>Trạng thái</th>
                <th>Thao tác</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Date.ToString("dd/MM/yyyy HH:mm")</td>
                    <td>@item.CustomerName</td>
                    <td>@item.Total.ToString("N0", vnFormat)</td>
                    <td>@item.Status</td>
                    <td>
                        <a href="@Url.Action("Details", new { id = item.Id })" class="text-primary">Chi tiết đơn hàng</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="pagination-container">
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page, searchName = ViewBag.SearchName, searchStatus = ViewBag.SearchStatus, searchDate = ViewBag.SearchDate }))
    </div>
}
else
{
    <div class="alert alert-warning text-center">KHÔNG CÓ</div>
}